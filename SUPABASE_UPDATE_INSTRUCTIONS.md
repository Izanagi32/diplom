# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ Supabase –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤

## üîß –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏:

### 1. –í–∏–∫–æ–Ω–∞—Ç–∏ SQL –∑–∞–ø–∏—Ç –≤ Supabase

–ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É Supabase: https://supabase.com/dashboard/project/lzhbhcmygndxufiowywn

–í—ñ–¥–∫—Ä–∏–π—Ç–µ **SQL Editor** —ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π SQL –∫–æ–¥:

```sql
-- –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤ —Å—Ç–∞—Ç—É—Å—É —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É –¥–æ —Ç–∞–±–ª–∏—Ü—ñ requests
ALTER TABLE requests 
ADD COLUMN status TEXT DEFAULT 'pending',
ADD COLUMN priority TEXT DEFAULT 'medium',
ADD COLUMN status_comment TEXT,
ADD COLUMN updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW();

-- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É –¥–ª—è —Å—Ç–∞—Ç—É—Å—É
CREATE INDEX idx_requests_status ON requests(status);

-- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è updated_at
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ language 'plpgsql';

-- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—Ä–∏–≥–µ—Ä–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è updated_at
CREATE TRIGGER update_requests_updated_at 
    BEFORE UPDATE ON requests 
    FOR EACH ROW 
    EXECUTE FUNCTION update_updated_at_column();

-- –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—ñ—Ç–∏–∫–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–¥–æ–∑–≤–æ–ª–∏—Ç–∏ –≤—Å—ñ–º)
CREATE POLICY "Allow update access for all users" ON requests
  FOR UPDATE USING (true);

-- –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—ñ—Ç–∏–∫–∏ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è (–¥–æ–∑–≤–æ–ª–∏—Ç–∏ –≤—Å—ñ–º)
CREATE POLICY "Allow delete access for all users" ON requests
  FOR DELETE USING (true);
```

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è SQL –∑–∞–ø–∏—Ç—É:

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Table Editor** ‚Üí **requests**
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –¥–æ–¥–∞–ª–∏—Å—è –Ω–æ–≤—ñ –∫–æ–ª–æ–Ω–∫–∏:
   - `status` (TEXT, default: 'pending')
   - `priority` (TEXT, default: 'medium') 
   - `status_comment` (TEXT)
   - `updated_at` (TIMESTAMP WITH TIME ZONE)

### 3. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

–ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –Ω–æ–≤–∏—Ö –∑–º—ñ–Ω:

1. **–ó–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É**: –í –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏
2. **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è**: –°–ø—Ä–æ–±—É–π—Ç–µ –≤—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∑–∞—è–≤–∫—É
3. **–í–∏–¥–∞–ª–µ–Ω–Ω—è**: –°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞—è–≤–∫—É
4. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ Supabase**: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∑–º—ñ–Ω–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü—ñ

## ‚úÖ –©–æ –±—É–ª–æ –¥–æ–¥–∞–Ω–æ:

### –ù–æ–≤—ñ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—ñ:
- **status**: –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ (pending, approved, rejected, in-progress, completed)
- **priority**: –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (low, medium, high)
- **status_comment**: –ö–æ–º–µ–Ω—Ç–∞—Ä –¥–æ –∑–º—ñ–Ω–∏ —Å—Ç–∞—Ç—É—Å—É
- **updated_at**: –î–∞—Ç–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è)

### –ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å API:
- **PUT /api/requests**: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞—è–≤–∫–∏ (—Å—Ç–∞—Ç—É—Å, –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç, –≤—Å—ñ –ø–æ–ª—è)
- **DELETE /api/requests?id=X**: –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞—è–≤–∫–∏

### –û–Ω–æ–≤–ª–µ–Ω–∞ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å:
- –ó–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É —Ç–µ–ø–µ—Ä –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–∞—è–≤–æ–∫ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö  
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞—è–≤–æ–∫ –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ API
- –î–æ–¥–∞–Ω–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

## üéØ –°—Ç–∞—Ç—É—Å–∏ –∑–∞—è–≤–æ–∫:

- **pending** (–í –æ—á—ñ–∫—É–≤–∞–Ω–Ω—ñ) - –Ω–æ–≤–∞ –∑–∞—è–≤–∫–∞
- **approved** (–°—Ö–≤–∞–ª–µ–Ω–æ) - –∑–∞—è–≤–∫–∞ –ø—Ä–∏–π–Ω—è—Ç–∞
- **rejected** (–í—ñ–¥—Ö–∏–ª–µ–Ω–æ) - –∑–∞—è–≤–∫–∞ –≤—ñ–¥—Ö–∏–ª–µ–Ω–∞
- **in-progress** (–í –ø—Ä–æ—Ü–µ—Å—ñ) - –∑–∞—è–≤–∫–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
- **completed** (–ó–∞–≤–µ—Ä—à–µ–Ω–æ) - –∑–∞—è–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üîÑ –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏:

- **low** (–ù–∏–∑—å–∫–∏–π)
- **medium** (–°–µ—Ä–µ–¥–Ω—ñ–π) - –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- **high** (–í–∏—Å–æ–∫–∏–π) 